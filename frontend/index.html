<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BloomBuddy</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/png" href="Images/favicon.png" />
  <link rel="stylesheet" href="dashboard.css" />
  <link rel="stylesheet" href="toast-notifications.css"> 
  <!-- Firebase SDK -->
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, getAdditionalUserInfo, signInAnonymously } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
    import { getFirestore, doc, setDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
    
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAF4xJYedIsOuKXD7JOLuR4gP74f4Tue90",
      authDomain: "bloombuddy-id.firebaseapp.com",
      projectId: "bloombuddy-id",
      storageBucket: "bloombuddy-id.firebasestorage.app",
      messagingSenderId: "837626738147",
      appId: "1:837626738147:web:63ad0819361b0281dc9cd6",
      measurementId: "G-SNEL7GGE3H"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    //Initialize Firestore
    const db = getFirestore(app);

  
     // Make auth and firestore available globally
    window.auth = auth;
    window.db = db;
    window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
    window.signInWithEmailAndPassword = signInWithEmailAndPassword;
    window.onAuthStateChanged = onAuthStateChanged;
    window.GoogleAuthProvider = GoogleAuthProvider;
    window.signInWithPopup = signInWithPopup;
    window.getAdditionalUserInfo = getAdditionalUserInfo;
    window.signInAnonymously = signInAnonymously;
    window.doc = doc;
    window.setDoc = setDoc;
    window.serverTimestamp = serverTimestamp;
  </script>

  <script src="auth-error-handler.js"></script>
  
  <script src="script.js" defer></script>
</head>
<body>
    <header>
      <div class="logo">
        <div class="logo-text">BB</div>
        <span class="brand-name">BloomBuddy</span>
      </div>

      <nav class="desktop-nav">
        <a href="dashboard.html">Dashboard</a>
        <a href="resources.html">Resources</a>
        <a href="podcasts.html">Podcasts</a>
        <a href="#" id="aboutLink">About</a>
      </nav>

      <div class="user-menu">
        <div class="profile-avatar" id="profileAvatar">
          <span id="userInitial">B</span>
        </div>
        <div class="profile-dropdown" id="profileDropdown">
          <div class="dropdown-header">
            <span id="dropdownUserEmail">user@example.com</span>
          </div>
          <a href="profile.html" class="dropdown-item">
            <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
            </svg>
            My Profile
          </a>
          <a href="#" class="dropdown-item">
            <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.532 1.532 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.532 1.532 0 01-.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" /></svg>
            Settings
          </a>
          <a href="#" class="dropdown-item">
            <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M10.89 2.207a2 2 0 00-1.78 0l-7 4.043a2 2 0 00-1.11 1.732V12a2 2 0 001.11 1.732l7 4.043a2 2 0 001.78 0l7-4.043a2 2 0 001.11-1.732V8a2 2 0 00-1.11-1.732l-7-4.043zM9 5a1 1 0 112 0v2.75l.4-.4a1 1 0 111.4 1.42l-2.1 2.1a1 1 0 01-1.4 0l-2.1-2.1a1 1 0 111.4-1.42l.4.4V5z" /></svg>
            Upgrade Plan
          </a>
          <a href="#" class="dropdown-item">
            <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M17.293 2.293a1 1 0 011.414 0l-1.06 1.06a1 1 0 010 1.414l-2.122 2.121a1 1 0 01-1.414 0l-1.06-1.06a1 1 0 010-1.414l2.12-2.121a1 1 0 011.414 0zM12.707 6.707a1 1 0 010-1.414l-2.12-2.121a1 1 0 01-1.414 0l-1.06 1.06a1 1 0 01-1.414 0l-2.121 2.121a1 1 0 010 1.414l1.06 1.06a1 1 0 010 1.414l2.121 2.121a1 1 0 011.414 0l1.06-1.06a1 1 0 011.414 0l2.121-2.121a1 1 0 010-1.414l-1.06-1.06zM6.707 12.707a1 1 0 010-1.414l-1.06-1.06a1 1 0 01-1.414 0l-2.121 2.121a1 1 0 010 1.414l1.06 1.06a1 1 0 010 1.414l2.121 2.121a1 1 0 011.414 0l1.06-1.06a1 1 0 011.414 0l2.121-2.121a1 1 0 010-1.414l-1.06-1.06a1 1 0 010-1.414l1.06-1.06a1 1 0 011.414 0l2.121 2.121a1 1 0 010 1.414l-1.06 1.06a1 1 0 01-1.414 0l-2.121-2.121a1 1 0 010-1.414l1.06-1.06z" /></svg>
            Personalization
          </a>
          <a href="#" class="dropdown-item">
            <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.06-1.061l2.5-2.5a.75.75 0 011.06 0l2.5 2.5a.75.75 0 01-1.06 1.06L11 5.688V9.75a.75.75 0 01-1.5 0V5.688L8.94 6.94z" clip-rule="evenodd" /><path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.25 9.75a.75.75 0 00-1.5 0V12a.75.75 0 00.75.75h2.5a.75.75 0 000-1.5H9.25V9.75z" clip-rule="evenodd" /></svg>
            Help
          </a>
          <a href="#" id="logoutBtn" class="dropdown-item logout">
            <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
            Logout
          </a>
        </div>
      </div>
  </header>

  <main>
    <h2>WELCOME TO YOUR HUB</h2>
    <p class="subtitle">A place of peace.....</p>

    <div class="auth-buttons">
      <button class="btn btn-google" id="googleSignIn">
        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo"/>
        Sign in with Google
      </button>
      <button class="btn" id="openLogin">Log in</button>
      <button class="btn" id="openSignup">Sign up</button>
      <button class="btn guest" id="continueGuest">Continue as guest</button>
    </div>
  </main>

  <!-- Login Modal -->
  <div class="modal" id="loginModal" aria-hidden="true" role="dialog" aria-labelledby="loginTitle">
    <div class="modal-content">
      <button class="modal-close" data-close aria-label="Close">&times;</button>
      
      <h3 id="loginTitle" class="modal-title">Welcome back</h3>
      <p class="modal-subtitle">Sign in to continue your journey</p>
      
      <form id="loginForm" class="modal-form" novalidate>
        <div class="form-group">
          <label for="loginEmail">Email address</label>
          <input 
            type="email" 
            id="loginEmail" 
            name="email"
            placeholder="you@example.com"
            autocomplete="email"
            required 
          />
          <span class="error-message"></span>
        </div>

        <div class="form-group">
          <label for="loginPassword">Password</label>
          <input 
            type="password" 
            id="loginPassword" 
            name="password"
            placeholder="Enter your password"
            autocomplete="current-password"
            required 
          />
          <span class="error-message"></span>
        </div>

        <div class="secondary-actions">
          <label style="display: flex; align-items: center; gap: 6px; font-size: 14px; color: #6b7280;">
            <input type="checkbox" name="remember" style="width: auto; margin: 0;">
            Remember me
          </label>
          <button type="button" class="btn-text" id="forgotPasswordLink">
            Forgot password?
          </button>
        </div>

        <div class="modal-actions">
          <button type="submit" class="btn-primary">Sign in</button>
        </div>
      </form>

      <div class="divider">or continue with</div>

      <div class="social-login">
        <button type="button" class="btn-google" id="googleSignIn">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo"/>
          Sign in with Google
        </button>
      </div>

      <div class="switch-form">
        Don't have an account? <button type="button" id="switchToSignup">Sign up</button>
      </div>
    </div>
  </div>

  <!--Signup Modal -->
  <div class="modal" id="signupModal" aria-hidden="true" role="dialog" aria-labelledby="signupTitle">
    <div class="modal-content">
      <button class="modal-close" data-close aria-label="Close">&times;</button>
      
      <h3 id="signupTitle" class="modal-title">Create account</h3>
      <p class="modal-subtitle">Start your spiritual growth journey</p>
      
      <form id="signupForm" class="modal-form" novalidate>
        <div class="form-group">
          <label for="signupName">Full name</label>
          <input 
            type="text" 
            id="signupName" 
            name="name"
            placeholder="John Doe"
            autocomplete="name"
            required 
          />
          <span class="error-message"></span>
        </div>

        <div class="form-group">
          <label for="signupEmail">Email address</label>
          <input 
            type="email" 
            id="signupEmail" 
            name="email"
            placeholder="you@example.com"
            autocomplete="email"
            required 
          />
          <span class="error-message"></span>
        </div>

        <div class="form-group">
          <label for="signupPassword">Password</label>
          <input 
            type="password" 
            id="signupPassword" 
            name="password"
            placeholder="At least 6 characters"
            autocomplete="new-password"
            required 
          />
          <span class="error-message"></span>
        </div>

        <div class="form-group">
          <label for="signupConfirm">Confirm password</label>
          <input 
            type="password" 
            id="signupConfirm" 
            name="confirmPassword"
            placeholder="Re-enter your password"
            autocomplete="new-password"
            required 
          />
          <span class="error-message"></span>
        </div>

        <div class="modal-actions">
          <button type="submit" class="btn-primary">Create account</button>
        </div>
      </form>

      <div class="divider">or sign up with</div>

      <div class="social-login">
        <button type="button" class="btn-google" id="googleSignUp">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo"/>
          Sign up with Google
        </button>
      </div>

      <div class="switch-form">
        Already have an account? <button type="button" id="switchToLogin">Sign in</button>
      </div>
    </div>
  </div>

  <!-- Forgot Password Modal -->
  <div class="modal" id="forgotPasswordModal" aria-hidden="true" role="dialog" aria-labelledby="forgotPasswordTitle">
    <div class="modal-content forgot-password-content">
      <button class="modal-close" data-close aria-label="Close">&times;</button>
      
      <div class="forgot-password-icon">ðŸ”‘</div>
      
      <h3 id="forgotPasswordTitle" class="modal-title">Reset password</h3>
      <p class="forgot-password-text">
        Enter your email address and we'll send you a link to reset your password.
      </p>
      
      <form id="forgotPasswordForm" class="modal-form" novalidate>
        <div class="form-group">
          <label for="resetEmail">Email address</label>
          <input 
            type="email" 
            id="resetEmail" 
            name="email"
            placeholder="you@example.com"
            autocomplete="email"
            required 
          />
          <span class="error-message"></span>
        </div>

        <div class="modal-actions">
          <button type="submit" class="btn-primary">Send reset link</button>
          <button type="button" class="btn-text" id="backToLogin" data-close style="width: 100%; padding: 8px;">
            Back to sign in
          </button>
        </div>
      </form>
    </div>
  </div>

</body>
</html>
