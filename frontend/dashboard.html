<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BloomBuddy Dashboard</title>
  <link rel="stylesheet" href="dashboard.css" />
  <link rel="stylesheet" href="toast-notifications.css">
  
  <link rel="icon" type="image/png" href="Images/favicon.png" />
  
  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getAuth, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
    import { getFirestore, doc, setDoc, addDoc, collection, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
    
    const firebaseConfig = {
      apiKey: "AIzaSyAF4xJYedIsOuKXD7JOLuR4gP74f4Tue90",
      authDomain: "bloombuddy-id.firebaseapp.com",
      projectId: "bloombuddy-id",
      storageBucket: "bloombuddy-id.firebasestorage.app",
      messagingSenderId: "837626738147",
      appId: "1:837626738147:web:63ad0819361b0281dc9cd6",
      measurementId: "G-SNEL7GGE3H"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    
    window.auth = auth;
    window.db = db;
    window.signOut = signOut;
    window.onAuthStateChanged = onAuthStateChanged;
    window.doc = doc;
    window.setDoc = setDoc;
    window.addDoc = addDoc;
    window.collection = collection;
    window.serverTimestamp = serverTimestamp;
  </script>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.3/purify.min.js"></script>
  <script src="auth-error-handler.js"></script>
  
  <script src="dashboard.js" defer></script>
</head>
<body>
  <header>
    <div class="logo">
      <div class="logo-text">BB</div>
      <span class="brand-name">BloomBuddy</span>
    </div>

    <nav class="desktop-nav">
      <a href="dashboard.html">Dashboard</a>
      <a href="resources.html">Resources</a>
      <a href="podcasts.html">Podcasts</a>
      <a href="#" id="aboutLink">About</a>
    </nav>

    <div class="user-menu">
        <div class="profile-avatar" id="profileAvatar">
          <span id="userInitial">B</span>
        </div>
        <div class="profile-dropdown" id="profileDropdown">
          <div class="dropdown-header">
            <span id="dropdownUserEmail">user@example.com</span>
          </div>
          <a href="profile.html" class="dropdown-item">
            <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
            </svg>
            My Profile
          </a>
          <a href="#" class="dropdown-item">
            <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.532 1.532 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.532 1.532 0 01-.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" /></svg>
            Settings
          </a>
          <a href="#" class="dropdown-item">
            <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M10.89 2.207a2 2 0 00-1.78 0l-7 4.043a2 2 0 00-1.11 1.732V12a2 2 0 001.11 1.732l7 4.043a2 2 0 001.78 0l7-4.043a2 2 0 001.11-1.732V8a2 2 0 00-1.11-1.732l-7-4.043zM9 5a1 1 0 112 0v2.75l.4-.4a1 1 0 111.4 1.42l-2.1 2.1a1 1 0 01-1.4 0l-2.1-2.1a1 1 0 111.4-1.42l.4.4V5z" /></svg>
            Upgrade Plan
          </a>
          <a href="#" class="dropdown-item">
            <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M17.293 2.293a1 1 0 011.414 0l-1.06 1.06a1 1 0 010 1.414l-2.122 2.121a1 1 0 01-1.414 0l-1.06-1.06a1 1 0 010-1.414l2.12-2.121a1 1 0 011.414 0zM12.707 6.707a1 1 0 010-1.414l-2.12-2.121a1 1 0 01-1.414 0l-1.06 1.06a1 1 0 01-1.414 0l-2.121 2.121a1 1 0 010 1.414l1.06 1.06a1 1 0 010 1.414l2.121 2.121a1 1 0 011.414 0l1.06-1.06a1 1 0 011.414 0l2.121-2.121a1 1 0 010-1.414l-1.06-1.06zM6.707 12.707a1 1 0 010-1.414l-1.06-1.06a1 1 0 01-1.414 0l-2.121 2.121a1 1 0 010 1.414l1.06 1.06a1 1 0 010 1.414l2.121 2.121a1 1 0 011.414 0l1.06-1.06a1 1 0 011.414 0l2.121-2.121a1 1 0 010-1.414l-1.06-1.06a1 1 0 010-1.414l1.06-1.06a1 1 0 011.414 0l2.121 2.121a1 1 0 010 1.414l-1.06 1.06a1 1 0 01-1.414 0l-2.121-2.121a1 1 0 010-1.414l1.06-1.06z" /></svg>
            Personalization
          </a>
          <a href="#" class="dropdown-item">
            <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.06-1.061l2.5-2.5a.75.75 0 011.06 0l2.5 2.5a.75.75 0 01-1.06 1.06L11 5.688V9.75a.75.75 0 01-1.5 0V5.688L8.94 6.94z" clip-rule="evenodd" /><path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.25 9.75a.75.75 0 00-1.5 0V12a.75.75 0 00.75.75h2.5a.75.75 0 000-1.5H9.25V9.75z" clip-rule="evenodd" /></svg>
            Help
          </a>
          <a href="#" id="logoutBtn" class="dropdown-item logout">
            <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
            Logout
          </a>
        </div>
      </div>
  </header>

  <main>
    <div class="dashboard-container">
      <div class="overlay">
        <div class="chatbot-box">
          <div class="ai-icon">ðŸ¤–</div>
          <h2>Hi there! What would you like support with today?</h2>

          <div class="button-group">
            <button class="dashboard-btn" data-topic="mood">Mood Check</button>
            <button class="dashboard-btn" data-topic="verse">Verse + Encouragement</button>
            <button class="dashboard-btn" data-topic="practice">âœ¨ Daily Practice</button>
            <button class="dashboard-btn" data-topic="growth">ðŸŒ± Spiritual Growth</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- AI Chat Modal -->
  <div class="chat-modal" id="chatModal" aria-hidden="true">
    <div class="chat-modal-content">
      <div class="chat-header">
        <h3 id="chatTitle">AI Assistant</h3>
        <button id="exportChatBtn" class="export-btn">Export</button>
        <button class="chat-close" data-close>&times;</button>
      </div>
      
      <div class="chat-messages" id="chatMessages">
        <div class="message ai-message">
          <div class="message-content">
            <p id="initialMessage">Hello! I'm here to help you with your spiritual and emotional well-being. How can I assist you today?</p>
          </div>
        </div>
      </div>
      
      <div class="chat-input-container">
        <input type="text" id="chatInput" placeholder="Type your message..." />
        <button id="sendBtn" class="send-btn">Send</button>
      </div>
    </div>
  </div>

  <!-- About Modal -->
  <div class="about-modal" id="aboutModal" aria-hidden="true">
    <div class="about-modal-content">
      <div class="about-header">
        <h3>About BloomBuddy</h3>
        <button class="about-close" data-close>&times;</button>
      </div>
      
      <div class="about-body">
        <div class="about-logo">
          <div class="about-logo-text">BB</div>
          <span class="about-brand-name">BloomBuddy</span>
        </div>
        
        <div class="about-description">
          <p>Welcome to <strong>BloomBuddy</strong>, your personal sanctuary for spiritual growth and emotional well-being. We believe that everyone deserves a safe space to explore their inner world, find peace, and grow in their faith journey.</p>
          
          <p>Our platform combines the wisdom of spiritual practices with the power of artificial intelligence to provide you with personalized support whenever you need it. Whether you're seeking encouragement, guidance for daily spiritual practices, or simply someone to talk to about your mood and emotions, BloomBuddy is here for you.</p>
          
          <p>Through our four specialized AI assistants, you can:</p>
          
          <ul class="about-features">
            <li><strong>Mood Check:</strong> Get compassionate support for your emotional well-being and mental health</li>
            <li><strong>Verse + Encouragement:</strong> Receive spiritual guidance and biblical encouragement tailored to your needs</li>
            <li><strong>Daily Practice:</strong> Develop meaningful spiritual disciplines like prayer, meditation, and gratitude</li>
            <li><strong>Spiritual Growth:</strong> Explore deeper aspects of your faith and relationship with God</li>
          </ul>
          
          <p>BloomBuddy is more than just an app â€“ it's your companion on the journey toward inner peace, spiritual maturity, and emotional healing. We're committed to providing a judgment-free environment where you can be authentic, vulnerable, and hopeful about your growth.</p>
          
          <p class="about-mission">Our mission is to help you bloom into the person you were created to be, one conversation at a time.</p>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
